-- Suppression et création de la base de données
DROP DATABASE IF EXISTS foire68;
CREATE DATABASE IF NOT EXISTS foire68;
USE foire68;

-- Création de la table `departements`
CREATE TABLE IF NOT EXISTS departements (
    id_dep INT UNSIGNED NOT NULL PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    dep_actif INT UNSIGNED NOT NULL,
    dep_taux DECIMAL(5,2) NOT NULL
) ENGINE=InnoDB;

-- Insertion des départements
INSERT INTO departements (id_dep, Name, dep_actif, dep_taux) VALUES
(75, 'Paris', 1, 10.50),
(69, 'Rhône', 1, 12.00),
(33, 'Gironde', 1, 9.75),
(13, 'Bouches-du-Rhône', 1, 11.25),
(59, 'Nord', 1, 8.50),
(44, 'Loire-Atlantique', 1, 10.00),
(31, 'Haute-Garonne', 1, 9.00),
(06, 'Alpes-Maritimes', 1, 13.00),
(92, 'Hauts-de-Seine', 1, 14.50),
(17, 'Charente-Maritime', 1, 9.25),
(29, 'Finistère', 1, 8.75),
(67, 'Bas-Rhin', 1, 10.75),
(54, 'Meurthe-et-Moselle', 1, 9.50),
(76, 'Seine-Maritime', 1, 11.00),
(83, 'Var', 1, 12.50),
(95, 'Val-d\'Oise', 1, 10.25),
(21, 'Côte-d\'Or', 1, 9.75),
(35, 'Ille-et-Vilaine', 1, 10.50),
(49, 'Maine-et-Loire', 1, 9.00),
(62, 'Pas-de-Calais', 1, 11.25),
(91, 'Essonne', 1, 13.00),
(78, 'Yvelines', 1, 12.75),
(14, 'Calvados', 1, 9.50),
(85, 'Vendée', 1, 10.00),
(50, 'Manche', 1, 8.50),
(01, 'Ain', 1, 9.25),
(68, 'Haut-Rhin', 1, 10.75),
(38, 'Isère', 1, 11.00),
(42, 'Loire', 1, 9.75),
(24, 'Dordogne', 1, 8.50),
(84, 'Vaucluse', 1, 12.00),
(60, 'Oise', 1, 10.25),
(72, 'Sarthe', 1, 9.50),
(28, 'Eure-et-Loir', 1, 9.00),
(11, 'Aude', 1, 10.50),
(66, 'Pyrénées-Orientales', 1, 11.75),
(56, 'Morbihan', 1, 9.25),
(89, 'Yonne', 1, 8.75),
(03, 'Allier', 1, 9.00),
(37, 'Indre-et-Loire', 1, 10.00),
(45, 'Loiret', 1, 11.25),
(94, 'Val-de-Marne', 1, 13.50),
(80, 'Somme', 1, 9.75),
(51, 'Marne', 1, 10.50),
(22, 'Côtes-d\'Armor', 1, 9.00),
(08, 'Ardennes', 1, 8.50),
(19, 'Corrèze', 1, 8.75),
(36, 'Indre', 1, 9.25),
(53, 'Mayenne', 1, 9.50),
(71, 'Saône-et-Loire', 1, 10.00),
(86, 'Vienne', 1, 9.75),
(09, 'Ariège', 1, 8.50),
(23, 'Creuse', 1, 8.00),
(26, 'Drôme', 1, 10.25),
(40, 'Landes', 1, 9.50),
(47, 'Lot-et-Garonne', 1, 9.00),
(57, 'Moselle', 1, 11.00),
(58, 'Nièvre', 1, 8.75),
(61, 'Orne', 1, 9.25),
(63, 'Puy-de-Dôme', 1, 10.50),
(64, 'Pyrénées-Atlantiques', 1, 11.75),
(65, 'Hautes-Pyrénées', 1, 9.50),
(70, 'Haute-Saône', 1, 9.00),
(73, 'Savoie', 1, 12.00),
(74, 'Haute-Savoie', 1, 13.00),
(79, 'Deux-Sèvres', 1, 9.25),
(81, 'Tarn', 1, 9.50),
(82, 'Tarn-et-Garonne', 1, 8.75),
(87, 'Haute-Vienne', 1, 9.00),
(88, 'Vosges', 1, 9.25),
(90, 'Territoire de Belfort', 1, 10.00),
(93, 'Seine-Saint-Denis', 1, 14.00),
(971, 'Guadeloupe', 1, 8.50),
(972, 'Martinique', 1, 8.75),
(973, 'Guyane', 1, 9.00),
(974, 'La Réunion', 1, 9.50),
(976, 'Mayotte', 1, 10.00);

-- Création de la table `candidats`
CREATE TABLE IF NOT EXISTS candidats (
    id_user INT UNSIGNED NOT NULL AUTO_INCREMENT,
    lastname_user VARCHAR(50) NOT NULL,
    firstname_user VARCHAR(50) NOT NULL,
    mail_user VARCHAR(150) NOT NULL,
    pass_user VARCHAR(500) NOT NULL,
    departement_user INT UNSIGNED NOT NULL,
    age_user TINYINT UNSIGNED NOT NULL,
    archive_user TINYINT NOT NULL,
    PRIMARY KEY (id_user),
    CONSTRAINT fk_departement FOREIGN KEY (departement_user) REFERENCES departements(id_dep),
    CONSTRAINT ck_age CHECK (age_user >= 18),
    CONSTRAINT uk_verifmail UNIQUE(mail_user),
    CONSTRAINT ck_formatmail CHECK (mail_user LIKE '%__@__%')
) ENGINE=INNODB;

-- Insertion des candidats
INSERT INTO candidats (lastname_user, firstname_user, mail_user, pass_user, departement_user, age_user, archive_user) VALUES
('Martin', 'Gabriel', 'gabriel.martin@email.fr', 'Gabriel2024!', 75, 24, 0),
('Bernard', 'Léa', 'lea.bernard@test.com', 'Chocolat123', 69, 31, 0),
('Thomas', 'Lucas', 'lucas.thomas@provider.net', 'Lucas1980', 33, 45, 0),
('Petit', 'Emma', 'emma.petit@email.fr', 'EmmaPetit!', 13, 19, 0),
('Robert', 'Louis', 'louis.robert@webmail.org', 'Azerty123', 59, 52, 1),
('Richard', 'Jade', 'jade.richard@email.fr', 'Jade_2025', 44, 28, 0),
('Durand', 'Hugo', 'hugo.durand@test.com', 'HugoBoss99', 31, 22, 0),
('Dubois', 'Chloé', 'chloe.dubois@provider.net', 'Soleil!123', 06, 35, 0),
('Moreau', 'Arthur', 'arthur.moreau@email.fr', 'ArthurM92', 92, 41, 0),
('Laurent', 'Manon', 'manon.laurent@webmail.org', 'ManonLola', 17, 26, 0),
('Simon', 'Jules', 'jules.simon@test.com', 'JulesVerne', 29, 33, 0),
('Michel', 'Zoé', 'zoe.michel@email.fr', 'Zoe_Michel', 67, 29, 0),
('Lefebvre', 'Raphaël', 'raphael.lefebvre@provider.net', 'Raphael54!', 54, 58, 1),
('Leroy', 'Alice', 'alice.leroy@email.fr', 'Wonderland', 76, 21, 0),
('Roux', 'Nathan', 'nathan.roux@test.com', 'Nathan1234', 83, 37, 0),
('David', 'Lina', 'lina.david@webmail.org', 'LinaDavid95', 95, 25, 0),
('Bertrand', 'Paul', 'paul.bertrand@email.fr', 'Paulo_21', 21, 49, 0),
('Morel', 'Sarah', 'sarah.morel@provider.net', 'SarahM35!', 35, 30, 0),
('Fournier', 'Tom', 'tom.fournier@test.com', 'TomTomGO', 49, 23, 0),
('Girard', 'Camille', 'camille.girard@email.fr', 'Camille62', 62, 55, 1),
('Bonnet', 'Théo', 'theo.bonnet@webmail.org', 'TheoBonnet91', 91, 27, 0),
('Dupont', 'Louise', 'louise.dupont@email.fr', 'Loulou78!', 78, 32, 0),
('Lambert', 'Adam', 'adam.lambert@test.com', 'Adam_Lambert', 14, 20, 0),
('Fontaine', 'Mila', 'mila.fontaine@provider.net', 'MilaF85', 85, 44, 0),
('Rousseau', 'Nolan', 'nolan.rousseau@email.fr', 'NolanR50', 50, 36, 0),
('Vincent', 'Eva', 'eva.vincent@webmail.org', 'EvaVincent01', 01, 24, 0),
('Muller', 'Enzo', 'enzo.muller@test.com', 'Ferrari68', 68, 29, 0),
('Lefevre', 'Anna', 'anna.lefevre@email.fr', 'Anna_Paris', 75, 18, 0),
('Faure', 'Mathis', 'mathis.faure@provider.net', 'Mathis19!', 19, 42, 0),
('Andre', 'Elena', 'elena.andre@email.fr', 'Elena38Isere', 38, 31, 0),
('Mercier', 'Axel', 'axel.mercier@test.com', 'AxelM42!', 42, 53, 1),
('Blanc', 'Inès', 'ines.blanc@webmail.org', 'InesB08', 08, 26, 0),
('Guerin', 'Ethan', 'ethan.guerin@email.fr', 'EthanG93', 93, 22, 0),
('Boyer', 'Louna', 'louna.boyer@provider.net', 'LounaB24', 24, 39, 0),
('Garnier', 'Sacha', 'sacha.garnier@test.com', 'Sacha84!', 84, 34, 0),
('Chevalier', 'Juliette', 'juliette.chevalier@email.fr', 'Juju_60', 60, 47, 0),
('Francois', 'Maël', 'mael.francois@webmail.org', 'MaelF72', 72, 19, 0),
('Legrand', 'Romane', 'romane.legrand@email.fr', 'Romane28!', 28, 28, 0),
('Gauthier', 'Liam', 'liam.gauthier@test.com', 'LiamG11', 11, 33, 0),
('Garcia', 'Jeanne', 'jeanne.garcia@provider.net', 'Jeanne66!', 66, 61, 1),
('Perrin', 'Noah', 'noah.perrin@email.fr', 'NoahP56', 56, 25, 0),
('Robin', 'Lola', 'lola.robin@webmail.org', 'LolaR89', 89, 21, 0),
('Clement', 'Tiago', 'tiago.clement@test.com', 'Tiago03!', 03, 40, 0),
('Morin', 'Agathe', 'agathe.morin@email.fr', 'AgatheM37', 37, 30, 0),
('Nicolas', 'Antoine', 'antoine.nicolas@provider.net', 'Antoine45', 45, 56, 0),
('Henry', 'Julia', 'julia.henry@email.fr', 'JuliaH94!', 94, 23, 0),
('Roussel', 'Valentin', 'valentin.roussel@test.com', 'Valentin80', 80, 27, 0),
('Mathieu', 'Clara', 'clara.mathieu@webmail.org', 'ClaraM51', 51, 35, 0),
('Gautier', 'Gabin', 'gabin.gautier@email.fr', 'Gabin22!', 22, 18, 0),
('Masson', 'Margaux', 'margaux.masson@provider.net', 'Margaux75', 75, 46, 0);
